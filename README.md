# Virtual File System

## Характеристики файловой системы

* Размер блока по умолчанию 4096 = 4 KB
* Максимальный размер файла в блоках составляет 8+512+512*512 = 262664
* Максимальный размер файла составляет 4 KB * 262664 = 1050656 KB = 1026,03125 MB
* Максимальное количество создаваемых файлов по умолчанию ограничено числом 100000
* Для хранения файлов по умолчанию создается 4 физических файла-хранилища
* Размер хранилища в блоках по умолчанию составляет 16384
* Размер каждого хранилища в байтах составляет 4 KB * 16384 = 65536 KB = 64 MB

## Подключение библиотеки

* Установите директорию `vfs` в корневую директорию вашего проекта
* Перейдите в нее и выполните команду `make`  
  `$ cd vfs && make`
* При сборке вашего проекта укажите компилятору флаги `-lvfs -Lvfs`  
  `$ g++ -o project mod1.o mod2.o mod3.o -lvfs -Lvfs`
* Для использования библиотечных определений подключается заголовочный файл `"vfs/ivfs.hpp"`  
  `#include "vfs/ivfs.hpp"`

## Использование библиотеки

* `IVFS vfs`
* `File f`
* `vfs.Mount(path)`
* `vfs.Umount()`
* `vfs.Open(path, perms)`
* `vfs.Delete(path)`
* `f.Read(buf, len)`
* `f.Write(buf, len)`
* `f.Lseek(offset, whence)`
* `f.Close()`
* `f.Size()`

## make команды

* `make prog` - выполняет сборку проекта
* `make run` - выполняет сборку и осуществляет запуск проекта
* `make memcheck` - запускает проект с valgrind
* `make tests` - выполняет тесты файловой системы
* `make tags` - генерирует tags файлы для работы в vim
* `make clean` - выполняет очистку

